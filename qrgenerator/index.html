
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>QR Image</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body style="margin:0;display:flex;justify-content:center;align-items:center;min-height:100vh;background:#000;">

<div id="qr"></div>

<script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>
<script>
let data = "Halo QR ðŸ˜…";
const q = window.location.search;

if (q.startsWith("?=")) {
  data = decodeURIComponent(q.slice(2).split("&")[0]);
}

const onlyImg = q.includes("onlyimg=1");

// logo F
const logoF = "data:image/svg+xml;utf8,\
<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'>\
<defs><linearGradient id='g' x1='0%' y1='0%' x2='100%' y2='100%'>\
<stop offset='0%' stop-color='%2300f2ff'/>\
<stop offset='100%' stop-color='%237a5cff'/>\
</linearGradient></defs>\
<rect width='200' height='200' rx='40' ry='40' fill='url(%23g)'/>\
<text x='50%' y='62%' text-anchor='middle' font-size='120' font-family='Arial' fill='white' font-weight='700'>F</text>\
</svg>";

const qr = new QRCodeStyling({
  width: 300,
  height: 300,
  data,
  margin: 5,
  image: logoF,
  dotsOptions: {
    type: "rounded",
    gradient: {
      type: "linear",
      rotation: 0,
      colorStops: [
        { offset: 0, color: "#00f2ff" },
        { offset: 1, color: "#7a5cff" }
      ]
    }
  },
  backgroundOptions: { color: "#ffffff" },
  cornersSquareOptions: { type: "extra-rounded", color: "#7a5cff" },
  cornersDotOptions: { type: "dot", color: "#00f2ff" },
  imageOptions: { margin: 6, imageSize: 0.3 }
});

qr.append(document.getElementById("qr"));

if (onlyImg) {
  setTimeout(async () => {
    const blob = await qr.getRawData("png");
    const url = URL.createObjectURL(blob);
    document.body.innerHTML = `<img src="${url}" style="max-width:100%;height:auto;" />`;
  }, 500);
}
</script>
</body>
</html>
